function is_old_ie(){return!0}function request_page(e){window.location=e}function reload_page(){location.reload()}function show_message(e){alert(e)}function show_hide_obj(e){"visible"==e.style.visibility?e.style.visibility="hidden":e.style.visibility="visible"}function check_miner_name(e){return!(e.length>15)&&(reg=new RegExp("^[a-zA-Z0-9__]+$"),!!reg.test(e))}function is_email(e){return/^(?:[a-z\d]+[_\-\+\.]?)*[a-z\d]+@(?:([a-z\d]+\-?)*[a-z\d]+\.)+([a-z]{2,})+$/i.test(e)}function check_username(e){return!!/^[a-zA-Z0-9\_@.]+$/.test(e)}function GetBrowserType(){return navigator.userAgent.indexOf("MSIE")>0?"MSIE":(isFirefox=navigator.userAgent.indexOf("Firefox")>0)?"Firefox":(isSafari=navigator.userAgent.indexOf("Safari")>0)?"Safari":(isCamino=navigator.userAgent.indexOf("Camino")>0)?"Camino":(isMozilla=navigator.userAgent.indexOf("Gecko/")>0)?"Gecko":"Unknow"}function get_element(e,t){return null==t&&(t=0),obj=document.getElementById(e),obj||(obj=document.getElementsByName(e),obj?obj[t]:null)}function search_child(e,t){if(!e||!e.hasChildNodes())return!1;if(t)for(var a=0;a<e.childNodes.length;a++){if(e.childNodes[a].id==t||e.childNodes[a].name==t)return e.childNodes[a];if(result=search_child(e.childNodes[a],t),result)return result}return!1}function check_number(e){var t=e.keyCode;return!(!e.ctrlKey&&!e.altKey)||(t>=48&&t<=57||t>=96&&t<=105||8==t||46==t||27==t||37==t||39==t||16==t||9==t||33==t||34==t||190==t||t>=91&&t<=93||t>=110&&t<124)}function get_max(e,t){return e>t?e:t}function get_min(e,t){return e<t?e:t}function cut_float_zero(e){var t=e.indexOf(".");if(t<0)return e;for(var a=e.length,r=e.length-1;r>=t&&("0"==e[r]||"."==e[r]);r--)a=r;return e.substr(0,a)}function num_need_fix(e,t){var a=(e=e.toString()).indexOf(".");return!(a<0)&&(e.length-a-1>t&&(t>0?e.substr(0,a+t+1):e.substr(0,a)))}function num_fix(e,t){var a=num_need_fix(e=e.toString(),t);return a||e}function rand(e,t){return Math.floor(Math.random()*t+e)}function page_rand(){return"&c="+rand(0,1e6)}function get_view_symbol(e,t){if(null==t||"l"==t)return(a=e.indexOf("_"))>=0?e.substr(0,a).toUpperCase():e.substr(0,3).toUpperCase();var a=e.indexOf("_");return a>=0?e.substr(a+1,e.length-a-1).toUpperCase():e.substr(4).toUpperCase()}function get_symbols(e){var t=e.indexOf("_");return t>=0?[e.substr(0,t).toUpperCase(),e.substr(t+1,e.length-t-1).toUpperCase()]:[""]}function trim(e){for(var t=0;t<e.length&&" "==e.charAt(t);t++);for(var a=e.length;a>0&&" "==e.charAt(a-1);a--);return t>a?"":e.substring(t,a)}function fireEvent(e,t){if(document.createEventObject){var a=document.createEventObject();return e.fireEvent("on"+t,a)}return(a=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),!e.dispatchEvent(a)}function get_query_string(e){if(-1==location.href.indexOf("?")||-1==location.href.indexOf(e+"="))return"";for(var t,a,r,n=location.href.substring(location.href.indexOf("?")+1).split("<!@!>"),i=0;i<n.length;i++)if(-1!=(t=n[i].indexOf("="))&&(a=n[i].substring(0,t),r=n[i].substring(t+1),a==e))return unescape(r.replace(/\+/g," "));return""}function updateOrderTab(e,t){var a=$("#ulMyOrderList").find("li").size(),r=$("#my-trade-list").find("li").size();1==t?2!=e?a<1?(0==$("#order-info-box").find(".noorder-tip").size()&&$("#order-info-box").append("<div class=noorder-tip><i class='order-tip-icon'>i</i><i>No record</i></div>"),$("#currOrder,#historyOrder").css("height","110px"),$("#ulMyOrderList,#my-trade-list").css("height","70px"),"0"===$.cookie("show_kline")?$("#my-fund-list").css("height","629px"):$("#my-fund-list").css("height","349px")):($("#order-info-box").find(".noorder-tip").remove(),"0"===$.cookie("show_kline")?($("#ulMyOrderList,#my-trade-list").css("height","340px"),$("#currOrder,#historyOrder,#my-fund-list").css("height","380px")):($("#currOrder,#historyOrder").css("height","250px"),$("#ulMyOrderList,#my-trade-list").css("height","209px"),$("#my-fund-list").css("height","209px"))):r<1?(0==$("#history-info-box").find(".noorder-tip").size()&&$("#history-info-box").append("<div class=noorder-tip><i class='order-tip-icon'>i</i><i>No record</i></div>"),$("#currOrder,#historyOrder").css("height","110px"),$("#ulMyOrderList,#my-trade-list").css("height","70px"),"0"===$.cookie("show_kline")?$("#my-fund-list").css("height","629px"):$("#my-fund-list").css("height","349px")):($("#history-info-box").find(".noorder-tip").remove(),"0"===$.cookie("show_kline")?($("#ulMyOrderList,#my-trade-list").css("height","340px"),$("#currOrder,#historyOrder,#my-fund-list").css("height","380px")):($("#currOrder,#historyOrder").css("height","250px"),$("#ulMyOrderList,#my-trade-list").css("height","209px"),$("#my-fund-list").css("height","209px"))):(0==$("#order-info-box").find(".index-modal").size()&&$("#order-info-box").append("<div class='index-modal'><i class='order-tip-icon'>i</i><i>No record</i><a class='sub-btn' href='/login'>LOGIN</a></div>"),0==$("#history-info-box").find(".index-modal").size()&&$("#history-info-box").append("<div class='index-modal'><i class='order-tip-icon'>i</i><i>No record</i><a class='sub-btn' href='/login'>LOGIN</a></div>"),0==$("#fund-info-box").find(".index-modal").size()&&$("#fund-info-box").append("<div class='index-modal'><i class='order-tip-icon'>i</i><i>No record</i><a class='sub-btn' href='/login'>LOGIN</a></div>"))}function largeOrders(){$("#tableAskList").css("height","610px"),"0"===$.cookie("show_kline")?$("#ul-trade-list").css("height","504px"):$("#ul-trade-list").css("height","264px"),$("#ask-list, #bid-list").css("height","240px"),$("#moreOrders").addClass("more-order-active")}function smallOrders(){$("#tableAskList,#ask-list, #bid-list").css("height",""),"0"===$.cookie("show_kline")?$("#ul-trade-list").css("height","810px"):$("#ul-trade-list").css("height","504px"),$("#ask-list").scrollTop(768),$("#moreOrders").removeClass("more-order-active")}function sell_all(){var e,t,a="undefined"!=typeof global_precision_vol?global_precision_vol:6,r="undefined"!=typeof global_precision_total?global_precision_total:6;(t=parseFloat(get_element("balance_bid_able").innerHTML))>0&&(e=parseFloat(get_element("bid_rate").value))>0&&(get_element("bid_vol").value=num_fix(t,a),get_element("bid_amount").value=num_fix(e*t,r))}function buy_all(){var e,t,a="undefined"!=typeof global_precision_vol?global_precision_vol:6,r="undefined"!=typeof global_precision_total?global_precision_total:6;if(t=parseFloat(get_element("balance_ask_able").innerHTML),""!=g_fiat){var n=get_bid_or_ask_decimals(t);t*=n.fiat_rate,r=n.fiat_rate_decimals}if(t>0&&(e=parseFloat(get_element("ask_rate").value))>0){var i=num_fix(t/e,a);get_element("ask_vol").value=i,get_element("ask_amount").value=num_fix(e*i,r)}}function set_price(e,t,a,r){var n=parseFloat(get_element("balance_bid_able").innerHTML),i=parseFloat(get_element("balance_ask_able").innerHTML),o="undefined"!=typeof global_precision_vol?global_precision_vol:6,l="undefined"!=typeof global_precision_total?global_precision_total:6,s=get_bid_or_ask_decimals(parseFloat(t).toString());n*=s.fiat_rate,i*=s.fiat_rate,-1!=(t=parseFloat(t)).toString().indexOf("e")&&(t=t.toFixed(8)),get_element("ask_rate").value=t,get_element("bid_rate").value=t,e?r-i>1e-8&&(r=i,a=i/t):a-n>1e-8&&(a=n,r=n*t);var d=parseFloat(Number(r).toFixed(8));-1!=d.toString().indexOf("e")&&(d=d.toFixed(8)),e?(get_element("ask_vol").value=num_fix(a,o),get_element("ask_amount").value=num_fix(d,l)):(get_element("bid_vol").value=num_fix(a,o),get_element("bid_amount").value=num_fix(d,l))}function trade_operator(e,a,r,n,o,l,s,d){n=void 0!==n?n:0,fee_percentage_buy=void 0!==n?n:0,d=void 0!==d?d:n,o=void 0!==o?o:6,l=void 0!==l?l:6,s=void 0!==s?s:6;is_old_ie()?(window.tradeInfoBox=null,window.dealInfoBox=null):(window.Widget=JUtils.Widget,window.tradeInfoBox=new TradeInfoBox(Widget),window.dealInfoBox=new DealInfoBox(Widget));var _={last_group_sec:1800,last_range_hour:1,is_line:0,recheck_main_rates:function(){_.reload_main_rates()},get_tline:function(e,t){var a,r,n,i=_.last_group_sec;_.last_range_hour;if(!t||t.length<=0)return!1;a=[],t.sort(function(e,t){return parseFloat(e[7])-parseFloat(t[7])});var o,l,s,d,u,c,m,g,f,b,p,h=(e-288e5)/1e3,y=0,v=0;for(n=t.length,r=0;r<n;r++)o=t[r],parseInt(o[7]),s=parseFloat(o[2]),d=parseFloat(o[3]),l=parseInt(o[5]),u=1e3*((u=Math.floor(l/i)*i)+28800),0!=v?(Math.abs(l-y)>=i&&(v=2),1==v&&(p+=d,g=s,s>f&&(f=s),s<b&&(b=s)),2==v&&(c=[u,p,m,f,b,g],a.push(c),m=s,g=s,f=s,b=s,p=d,u=1e3*((u=Math.ceil(l/i)*i)+28800),y=Math.floor(l/i)*i,v=1)):(y=h,m=s,g=s,f=s,b=s,p=d,v=1);return 1==v&&(c=[u=1e3*((u=Math.ceil(l/i)*i)+28800),p,m,f,b,g],a.push(c)),a},update_main_rates:function(e){if(!e)return!1;var t;_.last_group_sec,_.last_range_hour;var a=trade_global.main_chart.series[2],r=trade_global.main_chart.series[1],n=trade_global.main_chart.series[0];if(!a||!r||!n)return!1;if(r.length<=0)return!1;var i=0;if(r.points.length>0&&(i=r.points[r.points.length-1].x),(t=_.get_tline(i,e.history))&&!(t.length<=0)){var o,l,s=[],d=[],u=[];for(o=0;o<t.length;o++)d.push([t[o][0],t[o][5],t[o][3],t[o][4],t[o][2]]),s.push([t[o][0],t[o][5]]),u.push([t[o][0],t[o][1]]);var c,m;for(a.setVisible(!0),o=0;o<s.length;o++)if(!((c=s[o])[0]<a.points[0].x))if(c[0]>a.points[a.points.length-1].x)a.addPoint(c,!0,!0);else for(l=0;l<a.points.length;l++)if((m=a.points[l]).x==c[0]){m.y=c[1];break}for(a.setVisible(_.is_line),a.redraw(),o=0;o<u.length;o++)if(!((c=u[o])[0]<n.points[0].x))if(c[0]>n.points[n.points.length-1].x)n.addPoint(c,!0,!0);else for(l=0;l<n.points.length;l++)if((m=n.points[l]).x==c[0]){m.y+=c[1];break}for(n.redraw(),r.setVisible(!0),o=0;o<d.length;o++)if(!((c=d[o])[0]<r.points[0].x))if(c[0]>r.points[r.points.length-1].x)r.addPoint(c,!0,!0);else for(l=0;l<r.points.length;l++)if(m=r.points[l],c[0]==m.x){m.high<c[2]&&(m.high=c[2]),m.low>c[3]&&(m.low=c[3]),m.close=c[4],m.y=m.high;break}r.setVisible(!_.is_line),r.redraw(),trade_global.main_chart.redraw()}},line_toggle:function(e){"k"==e?(_.is_line=0,trade_global.main_chart.series[2].setVisible(!0),trade_global.main_chart.series[3].setVisible(!1)):(_.is_line=1,trade_global.main_chart.series[2].setVisible(!1),trade_global.main_chart.series[3].setVisible(!0))},reload_main_rates:function(e,r,n){e=void 0!==e?e:_.last_group_sec,r=void 0!==r?r:_.last_range_hour,n=void 0!==n&&n,_.last_group_sec=e,_.last_range_hour=2*e/3600;var i={symbol:a,group_sec:e,range_hour:r,type:"tline"};$.ajax({type:"get",url:"/json_svr/query/?u=10"+page_rand(),data:i,xhrFields:{withCredentials:!0},success:function(e,a){var r=e;if(r&&r.result&&r.tline){if(n)trade_global.time_line=r.tline;else for(var i=0;i<r.tline.length;i++){var o=r.tline[i];o[0]==trade_global.time_line[trade_global.time_line.length-1][0]?trade_global.time_line[trade_global.time_line.length-1]=o:o[0]>trade_global.time_line[trade_global.time_line.length-1][0]&&trade_global.time_line.push(o)}var l,s,d,_=trade_global.time_line,u=[],c=[],m=[],g=[],f=[],b=[],p=[],h=[],y=[],v=[],x=!1;for(i=0;i<_.length;i++)if(!(_.length>30&&i<20)){for(_[i][2]<1e-6?u.push([_[i][0],1.0001*_[i][5],1.0001*_[i][3],1.0001*_[i][4],1.0001*_[i][2]]):u.push([_[i][0],_[i][5],_[i][3],_[i][4],_[i][2]]),g.push([_[i][0],_[i][5]]),c.push([_[i][0],_[i][1]]),m.push([_[i][0],1*parseFloat(_[i][1]*_[i][5]).toFixed(4)]),l=0,d=0,s=0;s<10;s++)i>=s&&(l+=parseFloat(_[i-s][3]),l+=parseFloat(_[i-s][4]),d+=2);for(d>0?l/=d:l=_[i][3],f.push([_[i][0],l]),md=0,d=0,s=0;s<10;s++)i>=s&&(md+=(parseFloat(_[i-s][3])-l)*(parseFloat(_[i-s][3])-l),md+=(parseFloat(_[i-s][4])-l)*(parseFloat(_[i-s][4])-l),d+=2);for(md=d>0?Math.sqrt(md/d):0,up=l+2*md,dn=l-2*md,p.push([_[i][0],up,dn]),l=0,d=0,s=0;s<21;s++)i>=s&&(l+=parseFloat(_[i-s][3]),l+=parseFloat(_[i-s][4]),d+=2);d>0?l/=d:l=_[i][3],b.push([_[i][0],l]),h.push([_[i][0],f[f.length-1][1]-b[b.length-1][1]]),t=h[h.length-1][1],x||(x=t),x=.2*t+.8*x,y.push([_[i][0],x]),v.push([_[i][0],t-x])}trade_global.main_chart.series[7].setData(v,!0),trade_global.main_chart.series[6].setData(p,!0),trade_global.main_chart.series[5].setData(b,!0),trade_global.main_chart.series[4].setData(f,!0),trade_global.main_chart.series[3].setData(g,!0),trade_global.main_chart.series[2].setData(u,!0),trade_global.main_chart.series[1].setData(m,!0),trade_global.main_chart.series[0].setData(c,!0),trade_global.main_chart.redraw(),n&&trade_global.main_chart.zoomOut()}r=null}})},recheck:function(){_.recheck_main_rates(a)}},u={ask_list:[],bid_list:[],best_ask_rate:0,best_bid_rate:0,init:function(e,t){this.best_ask_rate=t,this.best_bid_rate=e,page_obj.update_best_rate_and_input()},recalc_best_rate:function(){page_obj.update_best_rate()},reload_ask_bid_grid:function(){jQuery("#tableAskList").clearGridData(),jQuery("#tableBidList").clearGridData();for(e=0;e<this.ask_list.length;e++)jQuery("#tableAskList").jqGrid("addRowData",e+1,this.ask_list[e]);jQuery("#tableAskList").setGridParam({sortname:"rate",sortorder:"asc"}).trigger("reloadGrid");for(var e=0;e<this.bid_list.length;e++)jQuery("#tableBidList").jqGrid("addRowData",e+1,this.bid_list[e]);jQuery("#tableBidList").setGridParam({sortname:"rate",sortorder:"desc"}).trigger("reloadGrid")},reload_ask_bid_list_table:function(){var e={type:"ask_bid_list_table",symbol:a};return $.ajax({type:"get",url:"/json_svr/query/?u=11"+page_rand(),data:e,xhrFields:{withCredentials:!0},success:function(e,t){var a=e;if(a&&a.result){if(u.best_ask_rate=a.bid_rate0,u.best_bid_rate=a.ask_rate0,"FTP_BTC"!=trade_global.symbol){a.bid_rate0=a.bid_rate0>0?a.bid_rate0:a.ask_rate0?a.ask_rate0:0,a.ask_rate0=a.ask_rate0>0?a.ask_rate0:a.bid_rate0?a.bid_rate0:0;var r=(a.bid_rate0+a.ask_rate0)/2;update_top_price(r)}if(a.ask_list){g_ask_list=a.ask_list;var n=build_order_table(a.ask_list,1,32);""!=n&&(get_element("ul-ask-list").innerHTML=n)}if(a.bid_list){g_bid_list=a.bid_list;var i=build_order_table(a.bid_list,0,32);""!=i&&(get_element("ul-bid-list").innerHTML=i)}if(a.trade_list){g_trade_list=a.trade_list;var o=build_trade_history_table(a.trade_list);""!=o&&(get_element("ul-trade-list").innerHTML=o)}get_Price_Percent(a.market_rates)}page_obj.update_best_rate(),a=null}}),!0},reload_ask_bid_list:function(){var e={type:"ask_bid_list",symbol:a,tid:dealInfoBox.latestTid};return $.ajax({type:"get",url:"/json_svr/query/?u=12"+page_rand(),data:e,xhrFields:{withCredentials:!0},success:function(e,t){var a=e;a&&a.result&&(u.best_ask_rate=a.bid_rate0,u.best_bid_rate=a.ask_rate0,tradeInfoBox.update(a.orders),dealInfoBox.update(a.history),_.update_main_rates(a.history)),page_obj.update_best_rate(),a=null}}),!0},recheck_ask_bid_list:function(){is_old_ie()?u.reload_ask_bid_list_table():u.reload_ask_bid_list()},recheck:function(){u.recheck_ask_bid_list()}},c={reload_thistory_data_list:function(){var e={type:"trade_history_list",symbol:a};$.ajax({type:"get",url:"/json_svr/query/?u=01"+page_rand(),data:e,xhrFields:{withCredentials:!0},success:function(e,t){var a=e;a&&a.result&&a.history&&dealInfoBox.update(a),a=null}})},recheck_thistory_data:function(){c.reload_thistory_data_list()},recheck:function(){c.recheck_thistory_data()}};return page_obj={fee:.01*n,fee_sell:.01*d,my_orders_num:-1,cancelled_orders:[],my_orders:[],on_request_loan:function(e,t,n,i,o,l){if(!r||r<0)noty({text:"Please login first",type:"warning",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3});else if("borrow"==e&&parseFloat(t)>parseFloat(i))noty({text:"Limit volume:"+i,type:"warning",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3});else if(parseFloat(n)>1||parseFloat(n)<.01)noty({text:"The rate be no more than 1% and no less than 0.01%",type:"warning",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3});else{var s="";if("borrow"==e){var d=get_element("balance_borrow_able").innerHTML;if(t>Number(d))return void noty({text:"You don't have enough balance to borrow",type:"warning",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3});s+="Please confirm BORROW order:",s+="<hr/><br>",s+="<table id='tablePending'>",s+="<tr><td>Volume: </td><td>"+t+"&nbsp;"+a+"</td></tr>",s+="<tr><td>Rate(daily): </td><td>"+n+"%&nbsp;"+a+"</td></tr>",s+="</table>",s+="<br/>"}else{if("lend"!=e)return void noty({text:"Invalid loan type",type:"error",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3});void 0!==l&&parseInt(l);s+="Please confirm LEND order:",s+="<hr/><br>",s+="<table id='tablePending'>",s+="<tr><td>Volume: </td><td>"+t+"&nbsp;"+a+"</td></tr>",s+="<tr><td>Rate(daily): </td><td>"+n+"%</td></tr>",s+=0==o?"<tr><td>Duration:</td><td>15Days</td></tr>":"<tr><td>Duration:</td><td>Automatically offered again after 15Days</td></tr>",s+="</table>",s+="<br/>"}noty({text:s,type:"confirm",layout:"bottomLeft",theme:"gateioNotyTheme",modal:!0,animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},buttons:[{addClass:"btn btn-primary",text:"Confirm Order",onClick:function(a){page_obj.on_request_loan_confirmed(e,t,n,o,l),a.close()}},{addClass:"btn btn-danger",text:"Cancel",onClick:function(e){e.close()}}]})}},on_request_loan_confirmed:function(e,r,n,i,o){var l={type:e,symbol:a,amount:r,rate:n,auto_renew:i,rask:o};$.ajax({type:"get",url:"/json_svr/loan/?u=1"+page_rand(),data:l,xhrFields:{withCredentials:!0},success:function(r,n){var i=r,o="";if(i.records&&(o+="Order filled:",o+="<hr/>",o+="<br/>"),i.pending){o+="Order placed:",o+="<hr/>",o+="<table id='tablePending'>";for(var l=0;l<i.pending.length;l++)o+="<tr><td colspan='2'>Order id: </td><td>"+i.pending[l].id+"</td></tr>","borrow"==e?o+="<tr><td>Amount: </td><td>"+i.pending[l].amount+"&nbsp;"+a+"</td></tr>":"lend"==e&&(o+="<tr><td>Amount: </td><td>"+i.pending[l].amount+"&nbsp;"+a+"</td></tr>"),o+="<tr><td>Rate(daily): </td><td>"+i.pending[l].rate+"%</td></tr>";"borrow"==e?(t="<font color=green>Borrow</font>",get_element("balance_borrow_able").innerHTML=get_element("balance_borrow_able").innerHTML-i.pending[0].amount):"lend"==e&&(1==i.pending[0].auto_renew?o+="<tr><td>Duration: </td><td>Automatically offered</td></tr>":o+="<tr><td>Duration: </td><td>15Days</td></tr>"),o+="</table>",o+="<br/>"}i.result?noty({text:o,type:"success",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3,callback:{onClose:function(){reload_page()}}}):(o="Failed, the reason is "+i.msg,noty({text:o,type:"error",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3,callback:{onShow:function(){}}})),i=null},error:function(e,t,a){noty({text:"Network error: "+e.status+" "+e.readyState+" "+t+" "+a,type:"error",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3,callback:{onShow:function(){}}})}})},cancel_loan_order:function(e,t,a){var r={type:"cancel",symbol:e,loan_type:t,oid:a};$.ajax({type:"get",url:"/json_svr/loan/?u=1"+page_rand(),data:r,xhrFields:{withCredentials:!0},success:function(e,t){var a=e;a&&a.result?(view_code="<div class='cancel_content'>Order Cancelled.</div>",noty({text:view_code,type:"success",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3,callback:{onShow:function(){page_obj.my_orders_num=-1}}})):(view_code="<div class='cancel_content'>Cancel order failed. "+a.msg+"</div>",noty({text:view_code,type:"warning",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3,callback:{onShow:function(){page_obj.my_orders_num=-1}}})),a=null},error:function(){noty({text:"Network error",type:"error",layout:"bottomLeft",theme:"gateioNotyTheme",timeout:5e3,callback:{onShow:function(){page_obj.my_orders_num=-1}}})}})},on_request_ask_bid:function(e,t,n){var i={open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},s=1,d=3,_=trade_global.symbol.split("_"),c=(_[0].toUpperCase(),_[1].toUpperCase()),m="CNY";if(""!=g_fiat&&(m=g_fiat),"BTC"==c?s=global_btc_cny_rate:"ETH"==c?s=global_eth_cny_rate:"USDT"==c&&(s=global_usdt_cny_rate),"USD"==g_fiat&&(s/=6.6),""==g_fiat)d=(s*=t)>=10?2:s>=1?3:s>=.1?4:s>=.01?5:s>=.001?6:7,s=parseFloat(s).toFixed(d);else{var g=t;t=(t=g/s).toFixed(8),s=g}var f="";if("BTC"!=c&&"ETH"!=c&&"USDT"!=c||(f="(or "+s+" "+m+")"),!r||r<0)noty({text:"Please login first",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:i,timeout:5e3});else if(n<=0)noty({text:"Please input the volume",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:i,timeout:5e3});else if(t>=1e9||0==t)noty({text:"The price must be between 0 and 1,000,000,000",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:i,timeout:5e3});else if(n>=1e9)noty({text:"Order volume must be less than 1,000,000,000",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:i,timeout:5e3});else{if("ask"==e){var b=get_element("balance_ask_able").innerHTML;if(t*n>Number(b))return void noty({text:"You don't have enough balance to buy",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:i,timeout:5e3})}else{if("bid"!=e)return void noty({text:"Invalid trading type",type:"error",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:i,timeout:5e3});var p=get_element("balance_bid_able").innerHTML;if(n>Number(p))return void noty({text:"You don't have enough balance to sell",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:i,timeout:5e3})}var h="",y=.5*(u.best_bid_rate+u.best_ask_rate);"ask"==e?(h+="Please confirm BUY order:",h+="<hr/><br>",h+="<table id='tablePending'>",h+="<tr><td>Price: </td><td>"+num_fix(t,o)+" "+f+"</td></tr>",h+="<tr><td>Volume: </td><td>"+num_fix(n,l)+"&nbsp;"+get_view_symbol(a,"l")+"</td></tr>",oper=y>0?(t-y)/y*100:0,oper>20&&(h+="<tr><td><font color=red>Warning: <font> </td><td>Your <font color=red>BUY</font> price is <font color=red>"+num_fix(oper,1)+"% HIGHER</font> than the average market price, please double check it.</td></tr>")):"bid"==e&&(h+="Please confirm SELL order:",h+="<hr/><br>",h+="<table id='tablePending'>",h+="<tr><td>Price: </td><td>"+num_fix(t,o)+" "+f+"</td></tr>",h+="<tr><td>Volume: </td><td>"+num_fix(n,l)+"&nbsp;"+get_view_symbol(a,"l")+"</td></tr>",oper=y>0?(y-t)/y*100:0,oper>20&&(h+="<tr><td><font color=red>Warning: <font> </td><td>Your <font color=red>SELL</font> price is <font color=red>"+num_fix(oper,1)+"% LOWER</font> than the average market price, please double check it.</td></tr>")),h+="</table>",h+="<br/>",noty({text:h,type:"confirm",layout:"center",theme:"gateioNotyTheme",modal:!0,animation:i,killer:!0,buttons:[{addClass:"btn btn-primary",text:"Confirm Order",onClick:function(a){page_obj.on_request_ask_bid_confirmed(e,t,n),a.close()}},{addClass:"btn btn-danger",text:"Cancel",onClick:function(e){e.close()}}]})}},on_request_ask_bid_confirmed:function(e,n,i,s,d){s=void 0!==s?s:"",d=void 0!==d?d:"";var _={open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50};if(!r||r<0)noty({text:"Please login first",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:_,timeout:5e3});else if(i<=0)noty({text:"Please input the volume",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:_,timeout:5e3});else if(n>=1e9||0==n)noty({text:"The price must be between 0 and 1,000,000,000",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:_,timeout:5e3});else if(i>=1e9)noty({text:"Order volume must be less than 1,000,000,000",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:_,timeout:5e3});else{if("ask"==e){var u=get_element("balance_ask_able").innerHTML;if(n*i>Number(u))return void noty({text:"You don't have enough balance to buy",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:_,timeout:5e3})}else{if("bid"!=e)return void noty({text:"Invalid trading type",type:"error",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:_,timeout:5e3});var c=get_element("balance_bid_able").innerHTML;if(i>Number(c))return void noty({text:"You don't have enough balance to sell",type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:_,timeout:5e3})}var m={type:e,symbol:a,rate:n,vol:i,fundpass:s,captcha:d};$.ajax({type:"get",url:"/json_svr/exchange/?u=1"+page_rand(),data:m,xhrFields:{withCredentials:!0},success:function(r,s){var d=r,_="";if(d.records){_+="Order filled:",_+="<hr/>",_+="<table id='tableRecords'>";for(u=0;u<d.records.length;u++)_+="<tr><td>",_+=u+1+".</td><td>",_+="Price: "+num_fix(d.records[u].rate,o)+"</td>","ask"==e?(_+="<td>Amount: </td><td>"+num_fix(d.records[u].vol,l)+"&nbsp;"+get_view_symbol(a,"l")+"</td></td>",_+="<td>Fee: </td><td>"+num_fix(d.records[u].vol*d.records[u].rate*page_obj.fee,8)+"&nbsp;"+get_view_symbol(a,"r")+"</td></tr>"):"bid"==e&&(_+="<td>Amount: </td><td>"+num_fix(d.records[u].vol,l)+"&nbsp;"+get_view_symbol(a,"l")+"</td></td>",_+="<td>Fee: </td><td>"+num_fix(d.records[u].vol*page_obj.fee_sell,8)+"&nbsp;"+get_view_symbol(a,"l")+"</td></tr>");_+="</table>",_+="<br/>"}if(d.pending){_+="Order placed:",_+="<hr/>",_+="<table id='tablePending'>";for(var u=0;u<d.pending.length;u++)_+="<tr><td>Order ID: </td><td>"+d.pending[u].id+"</td></tr>",_+="<tr><td>Price: </td><td>"+num_fix(d.pending[u].rate,o)+"</td></tr>","ask"==e?(_+="<tr><td>Amount: </td><td>"+num_fix(d.pending[u].vol,l)+"&nbsp;"+get_view_symbol(a,"l")+"</td></tr>",_+="<tr><td>Fee: </td><td>"+num_fix(d.pending[u].vol*d.pending[u].rate*page_obj.fee,8)+"&nbsp;"+get_view_symbol(a,"r")+"</td></tr>"):"bid"==e&&(_+="<tr><td>Amount: </td><td>"+num_fix(d.pending[u].vol,l)+"&nbsp;"+get_view_symbol(a,"l")+"</td></tr>",_+="<tr><td>Fee: </td><td>"+num_fix(d.pending[u].vol*page_obj.fee_sell,8)+"&nbsp;"+get_view_symbol(a,"l")+"</td></tr>");_+="</table>",_+="<br/>","ask"==e?(t="<font color=green>Buy</font>",get_element("balance_ask_able").innerHTML=get_element("balance_ask_able").innerHTML-d.pending[0].vol*d.pending[0].rate):(t="<font color=red>Sell</font>",get_element("balance_bid_able").innerHTML=get_element("balance_bid_able").innerHTML-d.pending[0].vol);var c=[t,num_fix(d.pending[0].rate,o),num_fix(d.pending[0].vol,l),0,"","--"];page_obj.my_orders.push(c),page_obj.rebuild_my_order_table()}if(d.require_fundpass){Math.random();_="<h3 style='margin-bottom:10px'>Fund Password:</h3>";_+="<div style='border-bottom:1px solid #666'></div><br>",_+="<table id='tablePending' width='90%'>",_+="<tr><td class='noty-td'>Fund pass: </td><td width='70%'><input class='inputRate' type='password' name='fundpass' id='fundpass' placeholder='Please input fund pass'></td></tr>",_+="<tr><td class='noty-td'>Cache for: </td><td width='70%'>2 hours &nbsp;&nbsp;(Unless IP change)</td></tr>",_+="</table><tr><td><label name='tips' id='tips'>"+d.msg+"</label></td></tr>",_+="<br/>";noty({text:_,type:"confirm",layout:"center",theme:"gateioNotyTheme",modal:!0,animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},buttons:[{addClass:"btn btn-primary dp-noty-btn",text:"Submit",onClick:function(t){var a=$("#fundpass").val();if(""==a)return $("#tips").html("<span style=color:#ff5d5d>Empty fund pass, please re-input</span>"),$("#fundpass").focus(),!1;var r=$("#captcha").val();return""==r?($("#tips").html("<span style=color:#ff5d5d>Empty code in the image, please re-input</span>"),$("#captcha").focus(),!1):(page_obj.on_request_ask_bid_confirmed(e,n,i,a,r),t.close(),!0)}},{addClass:"btn btn-danger dp-noty-btn",text:"Cancel",onClick:function(e){return e.close(),!1}}]})}else d.result?noty({text:_,type:"success",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},timeout:5e3,callback:{onShow:function(){page_obj.my_orders_num=-1}}}):(_="Failed, the reason is "+d.msg,noty({text:_,type:"error",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},timeout:5e3,callback:{onShow:function(){page_obj.my_orders_num=-1}}}));d=null},error:function(){noty({text:"Network error: "+req.status+" "+req.responseText+" "+status+" "+err,type:"error",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},timeout:5e3,callback:{onShow:function(){page_obj.my_orders_num=-1}}})},complete:function(){dlg_processing.close()}})}},recalc_fee:function(e){if("ask"==e){get_element("ask_vol").value,get_element("ask_rate").value;var t=get_element("ask_amount").value;get_element("ask_fee").innerHTML=cut_float_zero(num_fix(t*this.fee,8)),get_element("ask_fee").innerHTML.length>11&&(get_element("ask_fee").innerHTML=get_element("ask_fee").innerHTML.substr(0,11))}else{var a=get_element("bid_vol").value;get_element("bid_rate").value,get_element("bid_amount").value;get_element("bid_fee").innerHTML=cut_float_zero(num_fix(a*this.fee_sell,8)),get_element("bid_fee").innerHTML.length>11&&(get_element("bid_fee").innerHTML=get_element("bid_fee").innerHTML.substr(0,11))}return!0},on_input_ask_vol:function(){var e=get_element("ask_amount"),t=get_element("ask_rate"),a=get_element("ask_vol"),r=num_need_fix(a.value,l);r&&(a.value=r);var n=t.value*a.value;return e.value=n,e.value<1e-4&&(e.value=0),(r=num_need_fix(e.value,s))&&(e.value=r),!0},on_input_bid_vol:function(){var e=get_element("bid_amount"),t=get_element("bid_rate"),a=get_element("bid_vol"),r=num_need_fix(a.value,l);r&&(a.value=r);var n=t.value*a.value;return e.value=n,(r=num_need_fix(n,s))&&(e.value=r),!0},on_input_ask_rate:function(){var e=get_element("ask_rate"),t=e.value;if(""!=t&&$.isNumeric(t)&&!(t<=0)){var a=num_need_fix(e.value,o);a&&(t=a);var r=get_element("balance_ask_able"),n=get_element("amount_ask_able"),i=r.innerHTML;if(g_fiat){var s=get_bid_or_ask_decimals(i);(i*=s.fiat_rate).toFixed(s.fiat_rate_decimals)}var d=i/t;"NaN"!==num_fix(d)&&"0"!==num_fix(d)?n.innerHTML=num_fix(d,l):n.innerHTML="0.0000",page_obj.on_input_ask_vol()}},on_input_bid_rate:function(){var e=get_element("bid_rate"),t=e.value;if(""!=t&&$.isNumeric(t)&&!(t<=0)){var a=num_need_fix(e.value,o);a&&(t=a);var r=get_element("balance_bid_able"),n=get_element("amount_bid_able"),i=r.innerHTML,s=i*t;if(g_fiat){var d=get_bid_or_ask_decimals(i);(s/=d.fiat_rate).toFixed(d.fiat_rate_decimals)}"NaN"!==num_fix(s)&&"0"!==num_fix(s)?n.innerHTML=num_fix(s,l):n.innerHTML="0.0000",page_obj.on_input_bid_vol()}},on_input_ask_amount:function(){var e=get_element("ask_amount"),t=get_element("ask_rate"),a=get_element("ask_vol"),r=num_need_fix(e.value,s);r&&(e.value=r);var n=1e4*e.value/t.value;n<.01&&(n=0),n/=1e4,a.value=n,(r=num_need_fix(n,l))&&(a.value=r)},on_input_bid_amount:function(){var e=get_element("bid_amount"),t=get_element("bid_rate"),a=get_element("bid_vol"),r=num_need_fix(e.value,s);r&&(e.value=r);var n=1e4*e.value/t.value;return n<.01&&(n=0),n/=1e4,a.value=n,(r=num_need_fix(n,l))&&(a.value=r),!0},cancel_order:function(e,t){var a={type:"cancel",symbol:e,oid:t};$.ajax({type:"get",url:"/json_svr/exchange/?u=1"+page_rand(),data:a,xhrFields:{withCredentials:!0},success:function(e,a){var r=e;r&&r.result?(view_code="<div class='cancel_content'>Order Cancelled.</div>",noty({text:view_code,type:"success",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},timeout:5e3,callback:{onShow:function(){page_obj.my_orders_num=-1}}})):(view_code="<div class='cancel_content'>Cancel order failed: "+r.msg+"</div>",noty({text:view_code,type:"warning",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},timeout:5e3,callback:{onShow:function(){page_obj.my_orders_num=-1}}})),page_obj.cancelled_orders.push(t),page_obj.rebuild_my_order_table(),r=null},error:function(){noty({text:"Network error！",type:"error",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},timeout:5e3,callback:{onShow:function(){page_obj.my_orders_num=-1}}})}})},update_new_rate:function(){var e=0,t=99999,a=0,r=0;if(trade_global&&trade_global.time_line)for(var n=0;n<trade_global.time_line.length;n++)tnode=trade_global.time_line[n],e=get_max(e,Number(tnode[2])),t=get_min(t,Number(tnode[3])),a=Number(tnode[4]),r+=Number(tnode[5]);var i=get_element("pb_close"),s=get_element("pb_high"),d=get_element("pb_low"),_=get_element("pb_vol");i.innerHTML=a.toFixed(o),s.innerHTML=e.toFixed(o),d.innerHTML=t.toFixed(o),_.innerHTML=r.toFixed(l)},update_best_rate:function(){get_element("rate_best_ask").innerHTML=num_fix(Number(u.best_bid_rate).toFixed(10),o),get_element("rate_best_bid").innerHTML=num_fix(Number(u.best_ask_rate).toFixed(10),o),this.update_able_amount()},update_best_rate_and_input:function(){get_element("rate_best_ask").innerHTML=num_fix(Number(u.best_bid_rate).toFixed(10),o),get_element("rate_best_bid").innerHTML=num_fix(Number(u.best_ask_rate).toFixed(10),o),get_element("ask_rate").value=get_element("rate_best_ask").innerHTML,get_element("bid_rate").value=get_element("rate_best_bid").innerHTML,this.update_able_amount()},update_able_amount:function(){var e=u.best_ask_rate,t=u.best_bid_rate,a=get_element("balance_ask_able").innerHTML,r=get_element("balance_bid_able").innerHTML,n=a/t;n=$.isNumeric(n)?n:a;var i=r*e,d=get_element("amount_ask_able").innerHTML;get_element("amount_bid_able").innerHTML;(d<=0||get_element("rate_best_ask").innerHTML!=num_fix(Number(u.best_bid_rate).toFixed(10),o))&&(get_element("amount_ask_able").innerHTML=num_fix(Number(n).toFixed(10),l)),(d<=0||get_element("rate_best_bid").innerHTML!=num_fix(Number(u.best_ask_rate).toFixed(10),o))&&(get_element("amount_bid_able").innerHTML=num_fix(Number(i).toFixed(10),s))},rebuild_my_order_table:function(){var e,t=0;get_symbols(a);for(orderHtml="",order=page_obj.my_orders,cancelled=page_obj.cancelled_orders,i=0;order.length>i;i++){e=0;for(var r=0;r<cancelled.length;r++)if(order[i][3]==cancelled[r]){e=1;break}0==e&&(void 0!==order[i][4]?ostyle=order[i][4]:ostyle="number down odd hanga",orderHtml+="<li class='"+ostyle+"'>",orderHtml+="<span class='right-align' id='tlist-date'>"+order[i][5]+"</span>",orderHtml+="<span class='right-align my-type'>"+order[i][0]+"</span>",orderHtml+="<span class='right-align'>"+order[i][1]+"</span>",orderHtml+="<span class='right-align'>"+order[i][2]+"</span>",order[i][3]>0?(orderHtml+="<span class='right-align'><a href='#'  onclick=\"_page.obj.cancel_order( '',",orderHtml+=order[i][3],orderHtml+="); return false;\" style='font-size:14px;'>Cancel</a></span>"):orderHtml+="<span class='right-align'>-</span>",orderHtml+="</li>",t++)}orderHtml+="",get_element("ulMyOrderList")&&(get_element("ulMyOrderList").innerHTML=orderHtml),t>0&&(get_element("divMyOrderSection").style.display="block"),page_obj.my_orders_num=t},reload_order_data:function(){var e={type:"order_list",symbol:a};page_obj.my_orders_num=0,$.ajax({type:"get",url:"/json_svr/query/?u=13"+page_rand(),data:e,xhrFields:{withCredentials:!0},success:function(e,r){var n,i,d=e;if(d&&d.result){if(d.balances&&2==d.balances.length&&(0==d.balances[0]?get_element("balance_bid_able").innerHTML="0.0000":get_element("balance_bid_able").innerHTML=d.balances[0],0==d.balances[1]?get_element("balance_ask_able").innerHTML="0.0000":get_element("balance_ask_able").innerHTML=d.balances[1]),d.debuginfo&&(get_element("debugbox").innerHTML=d.debuginfo),d.my_trade_list_table&&(get_element("my-trade-list").innerHTML=d.my_trade_list_table),d.my_funds){var _=$("#fundData");_.text()==d.my_funds&&"undefined"!=typeof InitialFund&&void 0==$.cookie("zero_change")||(InitialFund=1,$.removeCookie("zero_change"),_.text(d.my_funds),$("#my-fund-list").html(""),$.each(d.my_funds,function(e,t){function a(){if(""==t[0])e="data-id=zero";else var e="";if("ed"==t[2])var a="Deposit",r="Suspended for maintenance.",n="err-depo",i="javascript:;";else var a="Deposit",r="Working",n="normal-depo",i="/myaccount/deposit/"+t[1];if("ww"==t[3])var o="Slow",l="Slow withdrawal queue",s="warn-depo",d="/myaccount/withdraw/"+t[1];else if("ew"==t[3])var o="Withdraw",l="Suspended for maintenance.",s="err-depo",d="javascript:;";else var o="Withdraw",l="Working",s="normal-depo",d="/myaccount/withdraw/"+t[1];var _=t[4],u=t[5],c=t[6];if(""==_)_="0.000000";if(""==u)u="0.000000";if(""==c)c="0.000000";$("#my-fund-list").append("<li "+e+'><span class="right-align my-type">'+t[1]+"</span><span class=right-align><i>"+_+'</i><em><a class="'+n+' fund-deposit" title='+r+" href="+i+">"+a+'</a><a class="'+s+' fund-withdraw" title='+l+" href="+d+">"+o+"</a></em></span><span class=right-align>"+u+"</span><span class=right-align>"+c+"</span></li>")}void 0===$.cookie("show_zero_funds")||"1"===$.cookie("show_zero_funds")?a():""!=t[0]&&a()}),void 0===$.cookie("show_zero_funds")||"1"===$.cookie("show_zero_funds")?$("#hidezero").prop("checked",!1):$("#hidezero").prop("checked",!0))}if(i=get_symbols(a),i&&i.length>1&&d.order&&d.order.length>0?(page_obj.my_orders=d.order,page_obj.rebuild_my_order_table()):(page_obj.my_orders.length=0,page_obj.rebuild_my_order_table()),d.my_trade_noty&&d.my_trade_noty.length>0){var u="";for(n=0;n<d.my_trade_noty.length;n++)t=d.my_trade_noty[n],u="",u+=t.trade_type+" "+get_view_symbol(a,"l")+" Order Completed:",u+="<hr/>",u+="<ul id='tableTradeNoty'><li>Price: <span>"+num_fix(t.rate,o)+"</span><i>"+get_view_symbol(a,"r")+"</i></li><li>Amount: <span>"+num_fix(t.vol,l)+"</span><i>"+get_view_symbol(a,"l")+"</i></li><li>Total: <span>"+num_fix(t.total,s)+"</span><i>"+get_view_symbol(a,"r")+"</i></li></ul>",noty({text:u,type:"information",layout:"bottomLeft",closeWith:["button","click"],theme:"gateioNotyTheme",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:50},timeout:5e3})}}else page_obj.my_orders_num=0;d=null},error:function(){page_obj.my_orders_num=-1}})},recheck_order_list:function(){r&&r>0&&page_obj.reload_order_data()},recheck:function(){page_obj.recheck_order_list()}},{main_rate:_,main_ask_bid_list:u,main_history_grid:c,obj:page_obj,run:function(){$.timer(function(){page_obj.recheck()},3e3,!0),$.timer(function(){u.recheck()},30500,!0)},createnewpoint:function(e){0==e?clearInterval(pointtimer):pointtimer=setInterval(function(){if(price_halfhour){var e=price_halfhour.length,t=parseFloat(price_halfhour[0]),a=parseFloat(price_halfhour[e-1]),r=parseFloat(price_halfhour[0]);for(i=0;i<e;i++)price_halfhour[i]>r&&(r=parseFloat(price_halfhour[i]));var n=parseFloat(price_halfhour[0]);for(i=0;i<e;i++)price_halfhour[i]<n&&(n=parseFloat(price_halfhour[i]));pricetime+=18e5,pricetime=pricetime.toString().substr(0,8),pricetime+="00000",pricetime=parseInt(pricetime);var o=1.05*r,l=.95*r;trade_global.main_chart.series[7].addPoint([pricetime,0],!1,!0),trade_global.main_chart.series[6].addPoint([pricetime,o,l],!1,!0),trade_global.main_chart.series[5].addPoint([pricetime,r],!1,!0),trade_global.main_chart.series[4].addPoint([pricetime,r],!1,!0),trade_global.main_chart.series[3].addPoint([pricetime,t],!1,!0),trade_global.main_chart.series[2].addPoint([pricetime,t,r,n,a],!1,!0),trade_global.main_chart.series[1].addPoint([pricetime,last_amount*r],!1,!0),trade_global.main_chart.series[0].addPoint([pricetime,last_amount],!1,!0),trade_global.main_chart.redraw(),price_halfhour=[],e=null,t=null,a=null,r=null,n=null}},18e5)},updatepoint:function(e){0==e?clearInterval(updateinterval):updateinterval=setInterval(function(){if(price_min){var e=price_min.length,t=parseFloat(price_min[0]),a=parseFloat(price_min[e-1]),r=parseFloat(price_min[0]);for(i=0;i<e;i++)price_min[i]>r&&(r=parseFloat(price_min[i]));var n=parseFloat(price_min[0]);for(i=0;i<e;i++)price_min[i]<n&&(n=parseFloat(price_min[i]));var o=1.05*r,l=.95*r,s=trade_global.main_chart.series[7].data.length;trade_global.main_chart.series[7].data[s-1].update([trade_global.main_chart.series[0].data[s-1].x,0]),trade_global.main_chart.series[6].data[s-1].update([trade_global.main_chart.series[0].data[s-1].x,o,l]),trade_global.main_chart.series[5].data[s-1].update([trade_global.main_chart.series[0].data[s-1].x,r]),trade_global.main_chart.series[4].data[s-1].update([trade_global.main_chart.series[0].data[s-1].x,r]),trade_global.main_chart.series[2].data[s-1].update([trade_global.main_chart.series[0].data[s-1].x,t,r,n,a]),trade_global.main_chart.series[1].data[s-1].update([trade_global.main_chart.series[0].data[s-1].x,r*last_amount]),trade_global.main_chart.series[0].data[s-1].update([trade_global.main_chart.series[0].data[s-1].x,last_amount]),price_min=[],e=null,t=null,a=null,r=null,n=null,s=null}},6e4)}}}function get_Price_Percent(e){var t=[],a=["usdt","btc","eth","new"];for(var r in e)if("ftp_btc"!=r)for(var n in a){var i="market_"+r+"_"+a[n],o=$("#"+i+" td").eq(1).find("span");if(0!=o.length){var l=e[r].length-1-e[r].indexOf("."),s=+parseFloat(e[r]);if($.isNumeric(s)&&!(s<=0)){var d="",_="";d=(_=g_left_side_price[a[n]]&&g_left_side_price[a[n]][i]?g_left_side_price[a[n]][i]:o.html()).substr(0,_.indexOf("<")-1);var u=parseFloat(d);if(s!=u){var c=+parseFloat(get_element("currPrice").innerHTML);if(trade_global.symbol==r&&c==s){var m="",g=get_element("top_last_rate_change").getElementsByTagName("font")[0].innerHTML;if(g.indexOf("+")>-1&&g.indexOf("-")>-1){var f=g.replace(/-/,"");m=+f.substr(1,f.length-2)}else m=+g.substr(1,g.length-2),g.indexOf("-")>-1&&(m=-m);v=m}else{var b=$("#"+i+" td").eq(2).find("font").html(),p="";if(b.indexOf("+")>-1&&b.indexOf("-")>-1){var h=b.replace(/-/,"");p=+h.substr(1,h.length-2)}else p=+b.substr(1,b.length-2),b.indexOf("-")>-1&&(p=-p);var y=parseFloat(100*u/(100+p)),v=(s-y)/y*100}if(!$.isNumeric(v))continue;var x=s;if(""!==g_fiat){var k=get_bid_or_ask_decimals(s,a[n].toUpperCase());l=k.fiat_rate_decimals,s*=k.fiat_rate}var w=s.toFixed(l);t.push([w,v,x-u,i,x,a[n]])}}}}0!=t.length&&change_price_percent(t),e=null}function downColor(e,t){e.stop().animate({"background-color":t},500).animate({"background-color":"transparent"},500,function(){e.css("background-color","")})}function upColor(e,t){e.stop().animate({"background-color":t},500).animate({"background-color":"transparent"},500,function(){e.css("background-color","")})}function change_price_percent(e){for(var t in e){var a,r=e[t][1].toFixed(2),n="<font color="+(e[t][1]<0?"red":"green")+" id=leftbarupdn>"+(e[t][1]<0?"":"+")+r+" %</font>",i="<span class="+(e[t][2]<0?"rate_up>":"rate_down>")+e[t][0]+(e[t][2]<0?" <i class=icon-arrow-down>↓</i></span>":" <i class=icon-arrow-up>↑</i></span>"),o=e[t][3],l="";"usdt"==e[t][5]?(a=oTable,l="usdt"):"btc"==e[t][5]?(a=bTable,l="btc"):"new"==e[t][5]?(a=uTable,l="eth"):(a=nTable,l="new"),g_left_side_price[l]&&(g_left_side_price[l][o]=e[t][4]+(e[t][2]<0?" <i class=icon-arrow-down>↓</i></span>":" <i class=icon-arrow-up>↑</i>"));var s=$("#"+o);a.fnUpdate(n,s[0],2),a.fnUpdate(i,s[0],1),e[t][2]<0?downColor(s,"rgba(255, 67, 67, 0.3)"):upColor(s,"rgba(42, 189, 163, 0.3)")}e=null}!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e,t){function a(e,t,a){var r=_[t.type]||{};return null==e?a||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),r.mod?(e+r.mod)%r.mod:Math.min(r.max,Math.max(0,e)))}function r(t){var a=s(),r=a._rgba=[];return t=t.toLowerCase(),u(l,function(e,n){var i,o=n.re.exec(t),l=o&&n.parse(o),s=n.space||"rgba";if(l)return i=a[s](l),a[d[s].cache]=i[d[s].cache],r=a._rgba=i._rgba,!1}),r.length?("0,0,0,0"===r.join()&&e.extend(r,i.transparent),a):i[t]}function n(e,t,a){return a=(a+1)%1,6*a<1?e+(t-e)*a*6:2*a<1?t:3*a<2?e+(t-e)*(2/3-a)*6:e}var i,o=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,a,r,n){return new e.Color.fn.parse(t,a,r,n)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},_={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=e.each;u(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,o,l,_){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var c=this,m=e.type(n),g=this._rgba=[];return o!==t&&(n=[n,o,l,_],m="array"),"string"===m?this.parse(r(n)||i._default):"array"===m?(u(d.rgba.props,function(e,t){g[t.idx]=a(n[t.idx],t)}),this):"object"===m?(n instanceof s?u(d,function(e,t){n[t.cache]&&(c[t.cache]=n[t.cache].slice())}):u(d,function(t,r){var i=r.cache;u(r.props,function(e,t){if(!c[i]&&r.to){if("alpha"===e||null==n[e])return;c[i]=r.to(c._rgba)}c[i][t.idx]=a(n[e],t,!0)}),c[i]&&e.inArray(null,c[i].slice(0,3))<0&&(c[i][3]=1,r.from&&(c._rgba=r.from(c[i])))}),this):void 0},is:function(e){var t=s(e),a=!0,r=this;return u(d,function(e,n){var i,o=t[n.cache];return o&&(i=r[n.cache]||n.to&&n.to(r._rgba)||[],u(n.props,function(e,t){if(null!=o[t.idx])return a=o[t.idx]===i[t.idx]})),a}),a},_space:function(){var e=[],t=this;return u(d,function(a,r){t[r.cache]&&e.push(a)}),e.pop()},transition:function(e,t){var r=s(e),n=r._space(),i=d[n],o=0===this.alpha()?s("transparent"):this,l=o[i.cache]||i.to(o._rgba),c=l.slice();return r=r[i.cache],u(i.props,function(e,n){var i=n.idx,o=l[i],s=r[i],d=_[n.type]||{};null!==s&&(null===o?c[i]=s:(d.mod&&(s-o>d.mod/2?o+=d.mod:o-s>d.mod/2&&(o-=d.mod)),c[i]=a((s-o)*t+o,n)))}),this[n](c)},blend:function(t){if(1===this._rgba[3])return this;var a=this._rgba.slice(),r=a.pop(),n=s(t)._rgba;return s(e.map(a,function(e,t){return(1-r)*n[t]+r*e}))},toRgbaString:function(){var t="rgba(",a=e.map(this._rgba,function(e,t){return null!=e?e:t>2?1:0});return 1===a[3]&&(a.pop(),t="rgb("),t+a.join()+")"},toHslaString:function(){var t="hsla(",a=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===a[3]&&(a.pop(),t="hsl("),t+a.join()+")"},toHexString:function(t){var a=this._rgba.slice(),r=a.pop();return t&&a.push(~~(255*r)),"#"+e.map(a,function(e){return("0"+(e||0).toString(16)).substr(-2)}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,a,r=e[0]/255,n=e[1]/255,i=e[2]/255,o=e[3],l=Math.max(r,n,i),s=Math.min(r,n,i),d=l-s,_=l+s,u=.5*_;return t=s===l?0:r===l?60*(n-i)/d+360:n===l?60*(i-r)/d+120:60*(r-n)/d+240,a=0===d?0:u<=.5?d/_:d/(2-_),[Math.round(t)%360,a,u,null==o?1:o]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,a=e[1],r=e[2],i=e[3],o=r<=.5?r*(1+a):r+a-r*a,l=2*r-o;return[Math.round(255*n(l,o,t+1/3)),Math.round(255*n(l,o,t)),Math.round(255*n(l,o,t-1/3)),i]},u(d,function(r,n){var i=n.props,l=n.cache,d=n.to,_=n.from;s.fn[r]=function(r){if(d&&!this[l]&&(this[l]=d(this._rgba)),r===t)return this[l].slice();var n,o=e.type(r),c="array"===o||"object"===o?r:arguments,m=this[l].slice();return u(i,function(e,t){var r=c["object"===o?e:t.idx];null==r&&(r=m[t.idx]),m[t.idx]=a(r,t)}),_?(n=s(_(m)),n[l]=m,n):s(m)},u(i,function(t,a){s.fn[t]||(s.fn[t]=function(n){var i,l,s,d,_=e.type(n);return d="alpha"===t?this._hsla?"hsla":"rgba":r,i=this[d](),l=i[a.idx],"undefined"===_?l:("function"===_&&(n=n.call(this,l),_=e.type(n)),null==n&&a.empty?this:("string"===_&&(s=o.exec(n))&&(n=l+parseFloat(s[2])*("+"===s[1]?1:-1)),i[a.idx]=n,this[d](i)))})})}),s.hook=function(t){var a=t.split(" ");u(a,function(t,a){e.cssHooks[a]={set:function(t,n){var i;"transparent"===n||"string"===e.type(n)&&!(i=r(n))||(n=(n=s(i||n)).toRgbaString()),t.style[a]=n}},e.fx.step[a]=function(t){t.colorInit||(t.start=s(t.elem,a),t.end=s(t.end),t.colorInit=!0),e.cssHooks[a].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return u(["Top","Right","Bottom","Left"],function(a,r){t["border"+r+"Color"]=e}),t}},i=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}),$(function(){if("undefined"==typeof coin_type_tr_id){coin_type_tr_id=[];var e=["usdt","btc","eth","new"];for(var t in e)for(var a=0;a<$("#marketlist_"+e[t]+" tbody").find("tr").length;a++)coin_type_tr_id.push($("#marketlist_"+e[t]+" tbody tr").eq(a).attr("id"))}});